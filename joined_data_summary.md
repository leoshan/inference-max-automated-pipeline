# InferenceMAX 版本数据Join结果

## 📊 生成概述

**输出文件**: `version_joined_comparison.csv`
**记录数**: 1,333条（+1表头 = 1,334行）
**Join条件**: model_name, sequence_length, conc, tp, precision, hwKey

## 🔗 Join统计结果

### 数据覆盖情况
- **版本1唯一键**: 1,339个
- **版本2唯一键**: 1,393个
- **共同键**: 1,333个
- **仅版本1**: 6个记录
- **仅版本2**: 60个记录

### 差异记录统计
- **总记录数**: 1,333条
- **e2e_x有差异**: 1,113条 (83.5%)
- **e2e_y有差异**: 1,090条 (81.8%)
- **inter_x有差异**: 1,102条 (82.7%)
- **inter_y有差异**: 1,090条 (81.8%)
- **至少一个指标有差异**: 1,113条 (83.5%)

## 📈 按模型分组统计

| 模型 | 总记录数 | e2e_x差异 | e2e_y差异 | inter_x差异 | inter_y差异 |
|------|----------|-----------|-----------|-------------|-------------|
| DeepSeek R1 0528 | 266 | 208 (78.2%) | 209 (78.6%) | 204 (76.7%) | 209 (78.6%) |
| Llama 3.3 70B Instruct | 678 | 553 (81.6%) | 527 (77.7%) | 549 (81.0%) | 527 (77.7%) |
| gpt-oss 120B | 389 | 352 (90.5%) | 354 (91.0%) | 349 (89.7%) | 354 (91.0%) |

## 📋 CSV文件结构

生成的CSV文件包含以下列：

### Join键字段（6列）
- `model_name` - 模型名称
- `sequence_length` - 序列长度
- `conc` - 并发数
- `tp` - Tensor并行度
- `precision` - 精度
- `hwKey` - 硬件配置

### 版本1数值（4列）
- `e2e_x_v1` - 版本1 E2E延迟
- `e2e_y_v1` - 版本1 E2E吞吐量
- `inter_x_v1` - 版本1 交互延迟
- `inter_y_v1` - 版本1 交互吞吐量

### 版本2数值（4列）
- `e2e_x_v2` - 版本2 E2E延迟
- `e2e_y_v2` - 版本2 E2E吞吐量
- `inter_x_v2` - 版本2 交互延迟
- `inter_y_v2` - 版本2 交互吞吐量

### 差异计算（8列）
- `e2e_x_diff` - E2E延迟绝对差值 (v2 - v1)
- `e2e_y_diff` - E2E吞吐量绝对差值
- `inter_x_diff` - 交互延迟绝对差值
- `inter_y_diff` - 交互吞吐量绝对差值
- `e2e_x_pct_diff` - E2E延迟百分比差异
- `e2e_y_pct_diff` - E2E吞吐量百分比差异
- `inter_x_pct_diff` - 交互延迟百分比差异
- `inter_y_pct_diff` - 交互吞吐量百分比差异

## 🔍 数据示例

前5条记录展示了不同模型的性能对比：

1. **DeepSeek R1 0528** (1k-1k, conc=1024, tp=72, fp8, gb200)
   - E2E延迟: 26.5ms → 28.0ms (+5.8%)
   - E2E吞吐量: 720.4 → 737.5 tokens/s (+2.4%)

2. **DeepSeek R1 0528** (1k-1k, conc=1075, tp=20, fp4, gb200)
   - E2E延迟: 20.1ms → 19.8ms (-1.5%)
   - E2E吞吐量: 4448.6 → 4519.8 tokens/s (+1.6%)

## 💡 关键发现

1. **Llama数据完整性**: Llama 3.3 70B Instruct在两个版本中都有完整数据，说明数据采集修复成功
2. **高度一致性**: 大部分记录(83.5%)在相同条件下仍有差异，说明数据在动态变化
3. **gpt-oss变化最大**: gpt-oss 120B模型有90%以上的记录存在性能差异

---

*生成时间: 2025-10-24*
*数据处理: join_versions.py*