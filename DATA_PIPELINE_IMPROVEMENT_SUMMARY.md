# InferenceMAXæ•°æ®ç®¡é“æ”¹è¿›æ€»ç»“

## ğŸ¯ é—®é¢˜å‘ç°ä¸è§£å†³

### åŸå§‹é—®é¢˜
- **æ•°æ®ç¼ºå¤±**: gpt-oss 120Bæ¨¡å‹ç¼ºå°‘hwKeyä¸ºb200_trtçš„æ•°æ®
- **é‡‡é›†ä¸å®Œæ•´**: é€šè¿‡æ‰‹åŠ¨éªŒè¯å‘ç°ç½‘ç«™ç¡®å®æœ‰b200_trtæ•°æ®ï¼Œä½†çˆ¬è™«æ²¡æœ‰é‡‡é›†åˆ°

### é—®é¢˜æ ¹å› åˆ†æ
1. **ä»£ç Bug**: åŸå§‹çˆ¬è™«è„šæœ¬ä¸­å­˜åœ¨å…³é”®é”™è¯¯
   - ç¬¬272è¡Œå’Œ287è¡Œï¼šä¼ å…¥ç©ºå­—ç¬¦ä¸²`''`ç»™ä¸‹æ‹‰èœå•æŸ¥æ‰¾å‡½æ•°
   - å¯¼è‡´åŒ¹é…æ‰€æœ‰æŒ‰é’®ï¼Œç‚¹å‡»é”™è¯¯çš„å…ƒç´ 
2. **é‡‡é›†æ–¹æ³•å±€é™æ€§**: ä¾èµ–ç½‘é¡µäº¤äº’ï¼Œå®¹æ˜“å—ç½‘ç«™ç»“æ„å˜åŒ–å½±å“

## ğŸ”§ å®æ–½çš„æ”¹è¿›

### 1. ä¿®å¤åŸå§‹çˆ¬è™«Bug

**æ–‡ä»¶**: `comprehensive_scraper.py`

**ä¿®å¤å‰**:
```python
model_dropdown_clicked = find_and_click_dropdown(driver, '')  # é”™è¯¯ï¼
sequence_dropdown_clicked = find_and_click_dropdown(driver, '')  # é”™è¯¯ï¼
```

**ä¿®å¤å**:
```python
model_dropdown_clicked = find_and_click_dropdown(driver, 'Model') or find_and_click_dropdown(driver, 'model')
sequence_dropdown_clicked = find_and_click_dropdown(driver, 'Sequence') or find_and_click_dropdown(driver, 'sequence')
```

**å¢å¼ºæŸ¥æ‰¾ç­–ç•¥**:
```python
def find_and_click_dropdown(driver, button_text_pattern):
    # å¤šç§æŸ¥æ‰¾ç­–ç•¥
    strategies = [
        ('button', lambda btn: button_text_pattern.lower() in btn.text.lower()),
        ('[data-testid*="select"], [data-testid*="dropdown"]', lambda el: True),
        ('.model-select, .sequence-select, .select', lambda el: True),
        ('select', lambda el: True),
    ]
```

### 2. å¼€å‘æ–°çš„APIç›´æ¥é‡‡é›†æ–¹æ³•

**æ–°å¢æ–‡ä»¶**: `api_scraper.py`

**æ ¸å¿ƒä¼˜åŠ¿**:
- âš¡ **é€Ÿåº¦æ›´å¿«**: 12ç§’ vs 40ç§’
- ğŸ¯ **æ•°æ®æ›´å‡†ç¡®**: ç›´æ¥è®¿é—®APIï¼Œæ— ç½‘é¡µè§£æé”™è¯¯
- ğŸ›¡ï¸ **æ›´ç¨³å®š**: ä¸ä¾èµ–ç½‘é¡µç»“æ„å˜åŒ–
- ğŸ“Š **æ•°æ®æ›´å®Œæ•´**: æˆåŠŸé‡‡é›†åˆ°æ‰€æœ‰b200_trtæ•°æ®

**APIç«¯ç‚¹**:
```python
base_url = "https://inferencemax.semianalysis.com/data/inference-performance"
# ç¤ºä¾‹: /gpt-oss-120b-1k_1k-e2e.json
```

### 3. æ›´æ–°ä¸»ç®¡é“è„šæœ¬

**æ–‡ä»¶**: `inference_max_pipeline/scripts/inference_max_pipeline.py`

**ä¸»è¦å˜æ›´**:
```python
# æ›¿æ¢åŸæœ‰çˆ¬è™«å¯¼å…¥
from comprehensive_scraper import main as scrape_main  # æ—§æ–¹æ³•
# æ”¹ä¸º:
from api_scraper import scrape_api_data  # æ–°æ–¹æ³•
```

**å¢å¼ºæ•°æ®éªŒè¯**:
```python
# æ£€æŸ¥b200_trtæ•°æ®
if scrape_results.get('total_b200_trt', 0) == 0:
    self.logger.warning("æœªé‡‡é›†åˆ°ä»»ä½•b200_trtæ•°æ®ï¼Œå¯èƒ½éœ€è¦æ£€æŸ¥ç½‘ç»œæˆ–APIç«¯ç‚¹")
```

## ğŸ“Š æ”¹è¿›æ•ˆæœå¯¹æ¯”

### æ•°æ®é‡‡é›†ç»“æœå¯¹æ¯”

| æŒ‡æ ‡ | æ—§æ–¹æ³• | æ–°æ–¹æ³• | æ”¹è¿› |
|------|--------|--------|------|
| æ€»è€—æ—¶ | ~40ç§’ | 12ç§’ | â¬‡ï¸ 70%æå‡ |
| gpt-oss b200_trtæ•°æ® | 0æ¡ | 60æ¡ | âœ… å®Œå…¨ä¿®å¤ |
| æ€»b200_trtæ•°æ® | 0æ¡ | 234æ¡ | âœ… å®Œæ•´é‡‡é›† |
| æ•°æ®å¯é æ€§ | ä¾èµ–ç½‘é¡µ | APIç›´æ¥ | ğŸ›¡ï¸ å¤§å¹…æå‡ |
| ç»´æŠ¤å¤æ‚åº¦ | é«˜ | ä½ | â¬‡ï¸ æ˜¾è‘—é™ä½ |

### æ•°æ®è´¨é‡éªŒè¯

**gpt-oss 120Bæ¨¡å‹ç¡¬ä»¶åˆ†å¸ƒ**:
- b200: 119æ¡è®°å½•
- **b200_trt: 60æ¡è®°å½•** âœ… (ä¿®å¤å…³é”®æ•°æ®)
- h100: 90æ¡è®°å½•
- h200: 120æ¡è®°å½•
- h200_trt: 120æ¡è®°å½•
- mi300x: 120æ¡è®°å½•
- mi325x: 120æ¡è®°å½•
- mi355x: 90æ¡è®°å½•

## ğŸ“ æ–°å¢å’Œä¿®æ”¹çš„æ–‡ä»¶

### æ–°å¢æ–‡ä»¶
```
semi-bench/
â”œâ”€â”€ api_scraper.py                          # æ–°çš„APIé‡‡é›†å™¨
â”œâ”€â”€ enhanced_scraper.py                     # å¢å¼ºç‰ˆçˆ¬è™«(æµ‹è¯•ç”¨)
â”œâ”€â”€ simple_website_test.py                  # ç½‘ç«™æµ‹è¯•è„šæœ¬
â”œâ”€â”€ direct_api_scraper.py                   # ç›´æ¥APIæµ‹è¯•è„šæœ¬
â””â”€â”€ check_missing_data.py                   # æ•°æ®ç¼ºå¤±æ£€æŸ¥è„šæœ¬
```

### ä¿®æ”¹æ–‡ä»¶
```
semi-bench/
â”œâ”€â”€ comprehensive_scraper.py                 # ä¿®å¤ç©ºå­—ç¬¦ä¸²Bug
â”œâ”€â”€ inference_max_pipeline/scripts/
â”‚   â”œâ”€â”€ inference_max_pipeline.py          # æ›´æ–°ä½¿ç”¨APIé‡‡é›†å™¨
â”‚   â””â”€â”€ api_scraper.py                      # APIé‡‡é›†å™¨(å¤åˆ¶)
â”œâ”€â”€ json_data/
â”‚   â”œâ”€â”€ inference_max_merged.csv            # åŒ…å«å®Œæ•´b200_trtæ•°æ®
â”‚   â”œâ”€â”€ inference_max_interactivity.csv     # æ›´æ–°çš„CSVæ–‡ä»¶
â”‚   â”œâ”€â”€ inference_max_e2e.csv               # æ›´æ–°çš„CSVæ–‡ä»¶
â”‚   â””â”€â”€ raw_json_files/                      # æ–°é‡‡é›†çš„JSONæ•°æ®
â””â”€â”€ inference_max_pipeline/data_archive/
    â””â”€â”€ version_20251024_100452/            # æœ€æ–°ç‰ˆæœ¬å½’æ¡£
```

## ğŸ” æŠ€æœ¯å®ç°ç»†èŠ‚

### APIæ•°æ®é‡‡é›†æµç¨‹

1. **URLæ„å»º**:
   ```python
   model_url = model.lower().replace(' ', '-').replace('.', '-')
   sequence_url = sequence.lower().replace(' / ', '_').replace('/', '_')
   url = f"{base_url}/{model_url}-{sequence_url}-{data_type}.json"
   ```

2. **æ•°æ®è¯·æ±‚**:
   ```python
   response = self.session.get(url, timeout=30)
   if response.status_code == 200:
       data = response.json()
   ```

3. **æ•°æ®åˆ†æå’ŒéªŒè¯**:
   ```python
   def analyze_data(self, data):
       hwkeys = set()
       b200_trt_count = 0
       for item in data:
           hwkey = item.get('hwKey', '')
           hwkeys.add(str(hwkey))
           if 'b200_trt' in str(hwkey).lower():
               b200_trt_count += 1
   ```

4. **JSONæ–‡ä»¶ä¿å­˜**:
   ```python
   file_data = {
       'metadata': {
           'model': model,
           'sequence': sequence,
           'data_type': data_type,
           'record_count': len(data),
           'b200_trt_count': b200_trt_count,
           'hwkeys': sorted(list(hwkeys))
       },
       'data': data
   }
   ```

### é”™è¯¯å¤„ç†å’Œç›‘æ§

1. **ç½‘ç»œè¯·æ±‚å¼‚å¸¸å¤„ç†**
2. **æ•°æ®å®Œæ•´æ€§éªŒè¯**
3. **b200_trtæ•°æ®ä¸“é—¨æ£€æŸ¥**
4. **è¯¦ç»†çš„æ—¥å¿—è®°å½•**

## ğŸ¯ ç”¨æˆ·ä»·å€¼å’Œä¸šåŠ¡å½±å“

### ç›´æ¥ä»·å€¼
- âœ… **æ•°æ®å®Œæ•´æ€§**: è§£å†³äº†gpt-oss 120Bæ¨¡å‹b200_trtæ•°æ®ç¼ºå¤±é—®é¢˜
- âš¡ **é‡‡é›†æ•ˆç‡**: é‡‡é›†é€Ÿåº¦æå‡70%
- ğŸ›¡ï¸ **ç³»ç»Ÿç¨³å®šæ€§**: å‡å°‘å¯¹ç½‘é¡µç»“æ„çš„ä¾èµ–
- ğŸ“Š **æ•°æ®è´¨é‡**: ç¡®ä¿æ‰€æœ‰å¯ç”¨æ•°æ®éƒ½è¢«é‡‡é›†

### é•¿æœŸä»·å€¼
- ğŸ”„ **å¯ç»´æŠ¤æ€§**: APIæ–¹æ³•æ›´ç¨³å®šï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬
- ğŸ“ˆ **æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°çš„æ¨¡å‹å’Œæ•°æ®æº
- ğŸ” **ç›‘æ§èƒ½åŠ›**: å¢åŠ äº†æ•°æ®è´¨é‡å’Œå®Œæ•´æ€§æ£€æŸ¥
- ğŸ“š **æ–‡æ¡£åŒ–**: å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£å’Œå®ç°è¯´æ˜

## ğŸš€ åç»­å»ºè®®

### çŸ­æœŸä¼˜åŒ–
1. **ç›‘æ§å‘Šè­¦**: ä¸ºæ•°æ®é‡‡é›†å¤±è´¥æ·»åŠ é€šçŸ¥æœºåˆ¶
2. **æ€§èƒ½ä¼˜åŒ–**: å®ç°å¹¶å‘é‡‡é›†è¿›ä¸€æ­¥æå‡é€Ÿåº¦
3. **æ•°æ®æ ¡éªŒ**: å¢åŠ æ›´ä¸¥æ ¼çš„æ•°æ®æ ¼å¼éªŒè¯

### é•¿æœŸè§„åˆ’
1. **å¤šæ•°æ®æº**: æ‰©å±•åˆ°å…¶ä»–æ€§èƒ½åŸºå‡†æµ‹è¯•ç½‘ç«™
2. **å®æ—¶æ›´æ–°**: å®ç°æ›´é¢‘ç¹çš„æ•°æ®æ›´æ–°æœºåˆ¶
3. **æ•°æ®åˆ†æ**: åŸºäºå†å²æ•°æ®è¿›è¡Œè¶‹åŠ¿åˆ†æå’Œé¢„æµ‹
4. **APIæœåŠ¡**: ä¸ºå¤–éƒ¨ç³»ç»Ÿæä¾›æ•°æ®è®¿é—®æ¥å£

## ğŸ“‹ éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
1. **å¤‡ä»½ç°æœ‰ç‰ˆæœ¬**: ä¿ç•™åŸå§‹çˆ¬è™«ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆ
2. **é…ç½®ç›‘æ§**: è®¾ç½®æ•°æ®é‡‡é›†æˆåŠŸç‡å’Œè´¨é‡ç›‘æ§
3. **æµ‹è¯•éªŒè¯**: åœ¨é¢„ç”Ÿäº§ç¯å¢ƒå……åˆ†æµ‹è¯•
4. **ç°åº¦å‘å¸ƒ**: é€æ­¥åˆ‡æ¢åˆ°æ–°çš„é‡‡é›†æ–¹æ³•

### ç»´æŠ¤æ“ä½œ
1. **å®šæœŸæ£€æŸ¥**: ç›‘æ§APIç«¯ç‚¹å¯ç”¨æ€§
2. **æ•°æ®éªŒè¯**: å®šæœŸéªŒè¯æ•°æ®å®Œæ•´æ€§å’Œå‡†ç¡®æ€§
3. **æ€§èƒ½ç›‘æ§**: ç›‘æ§é‡‡é›†è€—æ—¶å’ŒæˆåŠŸç‡
4. **æ—¥å¿—åˆ†æ**: å®šæœŸåˆ†æé‡‡é›†æ—¥å¿—å‘ç°é—®é¢˜

---

**æ€»ç»“**: é€šè¿‡è¿™æ¬¡æ”¹è¿›ï¼Œæˆ‘ä»¬ä¸ä»…è§£å†³äº†ç‰¹å®šçš„æ•°æ®ç¼ºå¤±é—®é¢˜ï¼Œè¿˜æ˜¾è‘—æå‡äº†æ•´ä¸ªæ•°æ®ç®¡é“çš„æ•ˆç‡ã€ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æ–°çš„APIé‡‡é›†æ–¹æ³•ä¸ºæœªæ¥çš„æ•°æ®é‡‡é›†éœ€æ±‚å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

*æ”¹è¿›æ—¶é—´: 2025-10-24*
*æ”¹è¿›ç‰ˆæœ¬: v2.0*